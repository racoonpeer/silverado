function MegaMenu(){var e={opened:!1,body:null,container:null,catalog:null,slidebar:null,controller:null,construct:function(){var e=this;e.slidebar=new slidebars,e.slidebar.init(),e.body=$("#sbIndex"),e.container=$(".mobile-menu"),e.catalog=$(".mobile-menu .catalog"),e.controller=$(".header-container .btn-nav")},initialize:function(){var e=this;e.construct(),e.controller.on("click",function(){e.toggle()}),e.container.swipe({swipeLeft:function(t,o,n){t.preventDefault(),n>=50&&e.toggle(),console.log("You swiped "+o)},swipeRight:function(t,o,n){t.preventDefault(),n>=50&&e.container.hasClass("shift")&&e.unshift(),console.log("You swiped "+o)}}),e.catalog.on("click",".sublevels > a",function(t){var o=$(this).closest("li"),n=(o.hasClass("hover-in"),o.children(".dropdown"));n.length&&(t.preventDefault(),o.siblings("li").removeClass("hover-in"),o.addClass("hover-in"),e.shift())}).on("click",".return",function(t){t.preventDefault();var o=$(this).closest(".sublevels"),n=o.hasClass("hover-in");n&&e.unshift()}).on("click",".close",function(t){t.preventDefault(),e.toggle()})},toggle:function(){var e=this;e.opened?e.close():e.open()},open:function(){var e=this;e.slidebar.getActiveSlidebar()||(e.slidebar.open("mobile-menu"),e.body.addClass("shift"),$("html,body").addClass("noscroll"),e.opened=!0)},close:function(){var e=this;e.slidebar.getActiveSlidebar()&&(e.slidebar.close("mobile-menu"),e.body.removeClass("shift"),$("html,body").removeClass("noscroll"),e.unshift(),e.opened=!1)},shift:function(){var e=this;e.container.addClass("shift")},unshift:function(){var e=this;e.container.removeClass("shift"),e.catalog.find(".hover-in").removeClass("hover-in")}};this.init_mobile=function(){return e}}function setZoom(e,t){t=parseInt(t)||2,$(e).zoom({magnify:t,touch:!0,url:$(e).data("original")})}function unSetZoom(e){$(e).trigger("zoom.destroy")}function equalGrid(){var e=$(".product-grid").find(".product-item, .load-more");e.length&&equalheight(e)}function equalheight(e){var t,o=0,n=0,i=new Array;$(e).each(function(){if(t=$(this),$(t).height("auto"),topPostion=t.position().top,n!=topPostion){for(currentDiv=0;currentDiv<i.length;currentDiv++)i[currentDiv].height(o);i.length=0,n=topPostion,o=t.height(),i.push(t)}else i.push(t),o=o<t.height()?t.height():o;for(currentDiv=0;currentDiv<i.length;currentDiv++)i[currentDiv].height(o)})}function CModal(){var e={opened:!1,instance:null,construct:function(){var e=this;e.instance=$("#modalDialog").remodal()},open:function(e){var t=this;return $.ajax({url:e,dataType:"json",complete:function(e){if(200==e.status){var o=e.responseJSON;o.output&&($("#modalDialog").children(".remodal-content").html(o.output),t.instance.open(),t.opened=!0)}},beforeSend:function(){t.beforeOpen()}}),!1},close:function(){var e=this;return e.instance.close(),e.opened=!1,!1},beforeOpen:function(){Basket.close(),Basket.closeDialog()}};this.init=function(){return e}}function CBasket(){var e={body:null,items:new Array,opened:!1,dialogOpened:!1,dialog:null,slidebar:null,basket_url:null,minicart:"minicart",basket:"basketLayout",minibasket:"minibasket",construct:function(){var e=this;e.slidebar=new slidebars,e.slidebar.init(),e.body=$("#sbIndex"),e.dialog=$("#basketDialog").remodal(),$(document).on("closed","#basketDialog",function(t){e.closeDialog(),console.log("Modal is closed"+(t.reason?", reason: "+t.reason:""))}),$(window).bind("keypress",function(t){console.log(t.which),27==t.which&&e.opened&&e.close()})},setUrl:function(e){var t=this;t.basket_url=e},add:function(e,t,o){var n=this;e=empty(e)?!1:e,t=parseInt(t)||1,o=o||0,"undefined"==typeof o&&(o=0),e&&$.ajax({url:n.basket_url,type:"GET",dataType:"json",data:{action:"add",itemID:e,qty:t,setNewQty:o},complete:function(e){"200"==e.status&&(n.opened||n.open(),n.update())}})},remove:function(e){var t=this;e=empty(e)?!1:e,e&&$.ajax({url:t.basket_url,type:"GET",dataType:"json",data:{action:"remove",itemID:e},complete:function(e){"200"==e.status&&t.update()}})},update:function(){var e=this;$.ajax({url:e.basket_url,type:"GET",dataType:"json",data:{action:"update"},complete:function(t){if("200"==t.status){var o=t.responseJSON;if(o.output&&(empty(o.output.basket)||empty($("#"+e.basket))||($(document).find("#"+e.basket).html(o.output.basket),$(window.parent.document).find("#"+e.basket).html(o.output.basket)),empty(o.output.minicart)||empty($("#"+e.minicart))||($(document).find("#"+e.minicart).replaceWith(o.output.minicart),$(window.parent.document).find("#"+e.minicart).replaceWith(o.output.minicart)),empty(o.output.minibasket)||empty($("#"+e.minibasket))||($(document).find("#"+e.minibasket).html(o.output.minibasket),$(window.parent.document).find("#"+e.minibasket).html(o.output.minibasket)),!empty(o.output.isEmpty)&&!empty($("#"+e.basket)))){var n=$("#"+e.basket).find(".watched-slider");empty(n)||n.swiper({slidesPerView:"auto",freeMode:!0,spaceBetween:24,scrollbar:n.find(".swiper-scrollbar"),scrollbarHide:!0,scrollbarDraggable:!0,nextButton:n.find(".swiper-button-next"),prevButton:n.find(".swiper-button-prev")})}o.output.items&&e.updateItems(o.output.items),e.updateButtons()}}})},clear:function(){var e=this;$.ajax({url:e.basket_url,type:"GET",dataType:"json",data:{action:"clear"},complete:function(t){"200"==t.status&&e.update()}})},open:function(){var e=this;e.closeDialog(),e.opened||(e.slidebar.toggle("drop-basket"),e.body.addClass("shift"),$("html,body").addClass("noscroll"),e.opened=!0)},close:function(){var e=this;e.opened&&(e.slidebar.toggle("drop-basket"),$("html,body").removeClass("noscroll"),e.body.removeClass("shift"),e.opened=!1),"undefined"!=typeof MobileFilters&&MobileFilters.close(),"undefined"!=typeof MobileMenu&&MobileMenu.close()},openDialog:function(e){var t=this;$.ajax({url:e,type:"GET",dataType:"json",data:{action:"basketDialog"},complete:function(e){if(200==e.status){var o=e.responseJSON;o.output&&($("#basketDialog").children(".remodal-content").html(o.output),t.dialog.open(),t.dialogOpened=!0,setTimeout(function(){var e=$("#basketDialog").find(".product-image .screen a");setZoom(e,1)},100))}},beforeSend:function(){t.close(),t.closeDialog()}})},closeDialog:function(){var e=this;$("#basketDialog").children(".remodal-content").html(""),e.dialog.close(),e.dialogOpened=!1},updateItems:function(e){var t=this;t.items=new Array;for(var o in e)t.items.push(o)},updateButtons:function(){var e=this,t=$(".product-flypage .add-to-cart");$.map(t,function(t){var o,n=$(t).data("key"),i=($(t).data("url"),in_array(n,e.items));i?$(t).addClass("in-cart"):$(t).removeClass("in-cart"),o=i?"Basket.open();":"Basket.add('"+n+"', 1, 0);",$(t).attr("onclick",o)})},changeOptions:function(e,t,o){var n=$(t).find("*[id^='options_"+e+"']"),i=e;return n.length&&(i+="|",$.each(n,function(e,o){if("radio"!=o.type||o.checked){var n=$(o).data("optionid"),a=$(t).find("input[data-optionid='"+n+"']"),r=new Array;a.length?$.each(a,function(e,t){t.checked&&r.push(t.value)}):r.push(o.value),i+=$(o).data("optionid")+"="+implode(",",r)+"/"}})),$.ajax({url:"/interactive/ajax.php",type:"GET",dataType:"json",data:{zone:"site",action:"AjaxChangeProductOptions",idKey:i,list:o},success:function(e){e.button&&$(t).find(".buttons").replaceWith(e.button),e.price&&$(t).find(".price").replaceWith(e.price)}}),!1}};this.init=function(){return e}}function empty(e){return""===e||0===e||"0"===e||null===e||e===!1||"undefined"===e||"undefined"==typeof e||is_array(e)&&0===e.length}function isset(e,t,o){var n=new Array,i=typeof e;if("undefined"!=typeof t&&(n[n.length]=t),"undefined"!=typeof o&&(n[n.length]=o),"undefined"!=i&&null!=e){if(n.length>0)for(var a=0;a<n.length;a++)if(e.length<=0&&("string"==i&&"string"==n[a]||"object"==i&&"array"==n[a]))return!1;return!0}return!1}function is_array(e){return e instanceof Array}function in_array(e,t,o){var n,i=!1,o=!!o;if(t.constructor===Object){for(n in t)if(o&&t[n]===e||!o&&t[n]==e){i=!0;break}}else if(t.constructor===Array)for(var n=0;n<t.length;n++)if(o&&t[n]===e||!o&&t[n]==e){i=!0;break}return i}function implode(e,t){return t instanceof Array?t.join(e):t}function array_key_exists(e,t){return!t||t.constructor!==Array&&t.constructor!==Object?!1:void 0!==t[e]}function number_format(e,t,o,n){var i,a,r,s,l;return isNaN(t=Math.abs(t))&&(t=2),void 0==o&&(o=","),void 0==n&&(n="."),i=parseInt(e=(+e||0).toFixed(t))+"",(a=i.length)>3?a%=3:a=0,l=a?i.substr(0,a)+n:"",r=i.substr(a).replace(/(\d{3})(?=\d)/g,"$1"+n),s=t?o+Math.abs(e-i).toFixed(t).replace(/-/,0).slice(2):"",l+r+s}var objBasket=new CBasket,Basket=objBasket.init(),objModal=new CModal,Modal=objModal.init(),objMenu=new MegaMenu,MobileMenu=objMenu.init_mobile();Modernizr.Detectizr.detect({addAllFeaturesAsClass:!1,detectDevice:!0,detectDeviceModel:!0,detectScreen:!0,detectOS:!0,detectBrowser:!0,detectPlugins:!0}),$(function(){$(document).delegate("a","click",function(e){var t=$(this).attr("href"),o=new RegExp("^#([A-z0-9]+)?");if(null!==t.match(o)&&(e.preventDefault(),t.length>1)){var n=t.substring(1),i=document.getElementById(n);if($(i).length){var a=$(i).offset();$("html, body").animate({scrollTop:Math.floor(a.top-100)},400)}}}),Modal.construct(),MobileMenu.initialize(),Basket.construct(),$(".body-overlay").on("click",function(){Basket.close(),MobileMenu.close("mobile-menu")}),$(window).on("scroll",function(){var e=$(".scroll-top"),t=window.pageYOffset||document.documentElement.scrollTop,o=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight);t>=Math.floor(o/3)?e.addClass("scroll-on"):e.removeClass("scroll-on")}),$(".scroll-top").on("click",function(){$("html, body").animate({scrollTop:0},400)}),$(document).on("change",".product-flypage .options input",function(){var e=$(this).closest(".options").find(".option-label"),t=$(this).data("label"),o=$(this).is(":checked");o&&e.text(t)});var e=$(".selections");e.length&&$.map(e,function(e){var t=$(e).find(".slick-ready");t.slick({infinite:!1,prevArrow:'<button type="button" class="slick-prev slick-arrow slick-disabled" role="button"></button>',nextArrow:'<button type="button" class="slick-next slick-arrow slick-disabled" role="button"></button>',slidesPerRow:6,slidesToShow:6,slidesToScroll:6,responsive:[{breakpoint:1340,settings:{slidesPerRow:4,slidesToShow:4,slidesToScroll:4}},{breakpoint:990,settings:{slidesPerRow:3,slidesToShow:3,slidesToScroll:3}},{breakpoint:640,settings:{slidesPerRow:2,slidesToShow:2,slidesToScroll:2}}]})}),$(".header-container").on("click",".search-toggle",function(){$(this).toggleClass("toggle-on")}),$(".header-container").on("mouseenter",".searchbar",function(){$(this).addClass("over")}).on("mouseleave",".searchbar",function(){$(this).removeClass("over")}),$("body").on("click",".searchbar",function(e){e.stopPropagation()}).on("click",function(){var e=$(".searchbar"),t=$(".live-search");$(".search-toggle");t.length&&!e.hasClass("over")&&t.remove()}),$("#qSearchText").autocomplete({source:function(e){$.ajax({url:$("#searchForm").attr("action"),type:"GET",dataType:"json",data:{q:e.term},success:function(e){$(".live-search").remove(),$("#searchForm").removeClass("loading"),e.output&&$("#searchForm").closest(".searchbar").append(e.output)},beforeSend:function(){$("#searchForm").addClass("loading")}})},minLength:3})});var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t,o,n,i,a,r,s,l="",c=0;for(e=Base64._utf8_encode(e);c<e.length;)t=e.charCodeAt(c++),o=e.charCodeAt(c++),n=e.charCodeAt(c++),i=t>>2,a=(3&t)<<4|o>>4,r=(15&o)<<2|n>>6,s=63&n,isNaN(o)?r=s=64:isNaN(n)&&(s=64),l=l+this._keyStr.charAt(i)+this._keyStr.charAt(a)+this._keyStr.charAt(r)+this._keyStr.charAt(s);return l},decode:function(e){var t,o,n,i,a,r,s,l="",c=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<e.length;)i=this._keyStr.indexOf(e.charAt(c++)),a=this._keyStr.indexOf(e.charAt(c++)),r=this._keyStr.indexOf(e.charAt(c++)),s=this._keyStr.indexOf(e.charAt(c++)),t=i<<2|a>>4,o=(15&a)<<4|r>>2,n=(3&r)<<6|s,l+=String.fromCharCode(t),64!=r&&(l+=String.fromCharCode(o)),64!=s&&(l+=String.fromCharCode(n));return l=Base64._utf8_decode(l)},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",o=0;o<e.length;o++){var n=e.charCodeAt(o);128>n?t+=String.fromCharCode(n):n>127&&2048>n?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t},_utf8_decode:function(e){for(var t="",o=0,n=c1=c2=0;o<e.length;)n=e.charCodeAt(o),128>n?(t+=String.fromCharCode(n),o++):n>191&&224>n?(c2=e.charCodeAt(o+1),t+=String.fromCharCode((31&n)<<6|63&c2),o+=2):(c2=e.charCodeAt(o+1),c3=e.charCodeAt(o+2),t+=String.fromCharCode((15&n)<<12|(63&c2)<<6|63&c3),o+=3);return t}};