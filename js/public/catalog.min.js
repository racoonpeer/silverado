function initFilterEvents(t){$(t).on("click",".filter-element:not(.disabled)",function(t){t.preventDefault();var e=$(this).attr("href")||$(this).data("href");forceUpdatePage(e)})}function initUpdatePage(t){"undefined"!=typeof jQuery&&"undefined"!=typeof window.History?$(window).on("statechange",function(){AjaxUpdatePage(window.location.href)}):setTimeout(function(){initUpdatePage(t)},t)}function AjaxUpdatePage(t){var e=$("#filtersForm"),o=$("#filtersFormPopup"),i=$("#selected_filters"),n=$("#products"),l=$("#control_filter"),r=$("#control_limit"),s=$("#control_sort"),a=$(".heading-title"),c=($(".seo-text"),document.getElementsByTagName("title")[0]),d=document.getElementsByName("description")[0],f=document.getElementsByName("keywords")[0];return $.ajax({url:t,type:"POST",dataType:"json",data:{ajaxUpdate:1},beforeSend:function(){e.addClass("load");var t=n.children(".product-item");t.length&&animateProducts(t)},success:function(t){if(t){t.filters&&e.html(t.filters),t.filters_popup&&o.html(t.filters_popup),"undefined"!=typeof t.selected_filters&&i.html(t.selected_filters),t.products&&n.html(t.products),t.control_sort&&s.replaceWith(t.control_sort),t.control_limit&&r.replaceWith(t.control_limit),t.control_filter&&l.replaceWith(t.control_filter),t.seo_title&&(c.innerHtml=t.seo_title,document.title=t.seo_title),t.meta_descr&&$(d).attr("content",t.meta_descr),t.meta_key&&$(f).attr("content",t.meta_key);var u=$("#meta_robots");if(t.meta_robots){var p='<meta name="robots" content="'+t.meta_robots+'" id="meta_robots"/>';u.length?$(u).replaceWith(p):$("head").append(p)}else u&&u.remove();t.h_title&&a.length&&a.text(t.h_title),t.bestkit_slider&&$(BestKit).replaceWith(t.bestkit_slider),e.removeClass("load"),$(".scroll-top").trigger("click")}}}),!1}function forceUpdatePage(t){History.enabled?History.pushState(null,document.title,t):AjaxUpdatePage(t)}function animateProducts(t){$.map(t,function(t){$(t).offset().top;$(t).animate({opacity:0},160)})}function CFilters(){var t={form:null,construct:function(){var t=this;t.form=$("#filtersForm")},setup:function(){var t=this;t.construct(),t.form.on("click",".more",function(t){t.preventDefault(),$(this).toggleClass("expand"),$(this).prev("ul").children(".hidable").toggleClass("hidden")}),initFilterEvents(t.form)}},e={root:null,body:null,form:null,slidebar:null,sections:null,active:!1,construct:function(){var t=this;t.form=$("#filtersFormPopup"),t.body=$("#sbIndex"),t.root=$("html,body"),t.slidebar=new slidebars,t.slidebar.init()},setup:function(){var t=this;t.construct(),t.form.on("click",".h4",function(e){e.preventDefault(),t.toggleSection($(this).closest(".section"))}),initFilterEvents(t.form)},toggle:function(){var t=this;t.active?t.close():t.open()},open:function(){var t=this;t.beforeOpen(),t.slidebar.open("filter-popup"),t.body.addClass("shift").addClass("overlay"),t.root.addClass("noscroll"),t.active=!0},beforeOpen:function(){},close:function(){var t=this;$.map(t.sections,function(e){t.closeSection(e)}),t.slidebar.close("filter-popup"),t.body.removeClass("shift").removeClass("overlay"),t.root.removeClass("noscroll"),t.active=!1},openSection:function(t){$(t).addClass("expanded")},closeSection:function(t){$(t).removeClass("expanded")},toggleSection:function(t){var e=this;$(t).hasClass("expanded")?e.closeSection(t):e.openSection(t)},apply:function(){var t=this;t.close()},cancel:function(){var t=this;t.close()}};this.init=function(){return t},this.init_mobile=function(){return e}}var objFilters=new CFilters,Filters=objFilters.init(),MobileFilters=objFilters.init_mobile();$(function(){Filters.setup(),MobileFilters.setup(),initUpdatePage(100)});